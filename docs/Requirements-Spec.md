# 分布式温控系统软件需求规格说明书

> 2014211306 班 F 组
>
> 李俊宁 董星彤 张有杰 赵亮 左旭彤
>
> 2017 年 05 月 11 日

[heading-numbering]

## [toc-heading] [no-number] Table of Contents

[TOC]

## [no-number] 迭代历史

> - v0.1 | 2017/5/11 | John Lee | 创建文档
> - v0.2 | 2017/5/13 | John Lee | 添加 引言、系统概述、业务背景描述、系统性能要求、系统的数据采集接口、其他需求分析

## 引言

### 编写目的

该文档主要的目的明确软件需求规格。根据已经确定的需求分析来描述软件的系统功能需求（数据流图）、系统数据模型（实体关系图）、系统性能要求和系统的数据采集接口等，软件开发人员根据此模型来进行软件的详细设计与开发。

读者对象为参与系统设计、实现的用户、设计人员、编码人员和测试人员等。

### 项目背景

系统是 **分布式温控系统软件**，主要有控制和调度中央空调系统、响应不同房间空调的请求、计算空调能耗和费用以及生成报表等功能。项目由 06 班 F 组开发，由酒店管理人员管理、验收。

### 词汇

术语 | 解释
--|--
系统 | 分布式温控系统
项目 | 分布式温控系统软件
文档 | 分布式温控系统软件需求规格说明书
主控机、主机 | 中央空调
从控机、从机 | 房间空调

### 书写规范

文档采用结构化需求分析方法，主要分析：系统功能需求（数据流图）、系统数据模型（实体关系图）、系统性能要求和系统的数据采集接口等。

文档内容分为三部分：系统概述（[sec|系统概述]）、系统功能需求分析（[sec|系统功能需求分析]）和其他需求分析（[sec|其他需求分析]）。其中，系统概述部分包括：系统建设目标、系统运行环境及条件和限制。系统功能需求分析包括：业务背景描述、系统功能需求、系统数据模型、系统性能要求和系统的数据采集接口。

## 系统概述

### 系统建设目标

根据如下需求，设计分布式温控系统：

1. 空调系统由中央空调（主控机）和房间空调（从控机）两部分构成。中央空调由特定的管理人员操控，房间空调由用户来操控。
2. 中央空调具备开关按钮，只可人工开启和关闭，正常开启后处于待机状态。有冷暖两种工作模式，每种模式有特定的缺省温度以及温度区间，可根据季节进行工作模式的调整。中央空调能够实时监测个房间的温度和状态，并且能够根据实时刷新的频率进行配置。
3. 从控机只能人工方式开闭，可以通过控制面板设置目标温度，目标温度有上下限制。控制面板的温度调节可以连续变化也可以断续变化。每个从控机内有一个温度传感器，可以实时监测房间的温度。
4. 从控机的控制面板能够发送高、中、低风速的请求，各小组可以自定义高、中、低三种风速下的温度变化值。中央空调可以根据从控机的请求时长及高中低风速的供风量计算每个房间所消耗的能量以及所需支付的金额，并将对应信息发送给每个从控机进行在线显示，以便客户查询。
5. 中央空调监控具备统计功能，可以根据需要给出日报表、周报表和月报表；报表内容如下：房间号、从控机开关机的次数、温控请求起止时间（列出所有记录）、温控请求的起止温度及风量大小（列出所有记录）、每次温控请求所需费用、每日（周、月）所需总费用。
6. 中央空调同时只能处理三台从控机的请求，为此主机要有负载均衡的能力。如果有超过三台从控机请求，则需要对所有请求机器进行调度，调度算法自行定义。

### 系统运行环境

系统分为主控机、从控机两部分。主控机运行在一台 Linux 服务器上，并使用守护进程保证其可靠性；每个从控机运行在一个 Windows 10 设备上，要求设备有：显示器、麦克风、扬声器、鼠标或触摸板 和 温度传感器。

### 条件和限制

根据系统阶段性建设目标，系统建设和运行的前提条件有：

- 主机能和中央空调系统进行通信，并控制中央空调系统
- 主机能通过 Web 方式进行管理
- 从机能采集房间温度信息
- 从机能通过语音和鼠标或触摸板方式与房客交互

## 系统功能需求分析

### 业务背景描述

当今社会，市场竞争激烈，旅客对于酒店的选择也五花八门。快捷廉价酒店以低价位吸引着旅客，但同时，要想留住顾客，就必须要提供高质量的服务。正是在这种需求下，催生了该分布式温控系统。该产品绿色节能环保，同时也能提供高质量的服务。凭借这独有的特色，定能在市场上拥有一席之地。

借助本系统，酒店管理人员可以很方便的进行中央空调系统的调度和控制（如中央空调温度控制、负载均衡）；房客可以很方便的控制自己房间的空调运行情况；另外，系统还提供了能耗计算、费用统计、报表生成等功能。使用本系统，可以大大减少酒店的中央空调维护管理开支。

### 系统功能需求

根据业务背景，系统的数据流图自顶向下分为三个层次。本部分将给出各个层次的数据流图和对应的数据词典。

#### 第 0 层数据流图

#####	数据流图

> 给出数据流图

##### 数据词典

1．外部实体
  - 酒店前台
  - 酒店后台
  - 房客
2．数据流
  - 房客信息
  - 日志请求
  - 日志
  - 空调配置
  - 登录信息
  - 空调状态
  - 目标状态
3．数据元素
  - 房间号（房客信息）
  - 身份证号（房客信息）
  - 日志类型（日志请求）
  - 房间号、从控机开关机的次数、温控请求起止时间（列出所有记录）、温控请求的起止温度及风量大小（列出所有记录）、每次温控请求所需费用、每日（周、月）所需总费用（日志）
  - 开关状态（空调配置）
  - 冬夏模式（空调配置）
  - 房间号（登录信息）
  - 身份证号（登录信息）
  - 房间温度（空调状态）
  - 空调温度（空调状态）
  - 空调风速（空调状态）
  - 能耗统计（空调状态）
  - 费用统计（空调状态）
  - 目标温度（目标状态）
  - 目标风速（目标状态）
4．数据文件
  - 房客信息
  - 日志
5．加工
  - 中央空调系统

#### 第 1 层数据流图

#####	数据流图

> 给出数据流图

##### 数据词典

1．外部实体
  - 酒店前台
  - 酒店后台
  - 房客
  - ..（同上）
  - 温度传感器
2．数据流
  - 房客信息
  - 日志请求
  - 日志
  - 空调配置
  - 登录信息
  - 空调状态
  - 目标状态
  - ..（同上）
  - 房间温度
  - 房间状态
  - 身份认证信息
  - 空调运行状态
  - 能耗费用信息
  - 状态调节请求
3．数据元素
  - ...
  - ..（同上）
  - 房间温度（房间温度）
  - 房间温度（房间状态）
  - 房间号（身份认证信息）
  - 身份证号（身份认证信息）
  - 空调温度（空调运行状态）
  - 空调风速（空调运行状态）
  - 能耗统计（能耗费用信息）
  - 费用统计（能耗费用信息）
  - 目标温度（状态调节请求）
  - 目标风速（状态调节请求）
4．数据文件
  - 房客信息
  - 日志
5．加工
  - 主控机子系统
  - 从控机子系统

#### 第 2 层数据流图

#####	数据流图

> 给出数据流图

##### 数据词典

1．外部实体
  - 酒店前台
  - 酒店后台
  - 房客
  - 温度传感器
2．数据流
  - ...
3．数据元素
  - ...
4．数据文件
  - 房客信息
  - 日志
5．加工

### 系统数据模型

> 给出系统初步的数据模型，即ER图。

### 系统性能要求

#### 数据精度

条目 | 精度
--|--
时间 | 1s
温度 | 1℃
风速 | 高、中、低
能耗 | 0.1 标准功率
费用 | 0.1 元

#### 时间特性

条目 | 时间
--|--
从控机发送房间温度 | 0.5s
从控机允许的用户请求间隔 | < 1s
从控机响应用户请求 | < 0.05s
主控机允许的从控机请求间隔 | < 1s
主控机响应从控机请求 | < 0.5s
系统运行时间 | 24 小时 / 天
系统故障时间 | < 8 小时 / 年

#### 适应性

条目 | 说明
--|--
运行环境 | 主机发生故障后，能自动重启
操作方式 | 从机允许触摸、鼠标两种方式进行交互
错误处理 | 主机（和从机）能检测到中央空调系统、从机（和主机）、（传感器）等外部接口发生的错误，并进行对应的错误处理

### 系统的数据采集接口

#### 主控机数据采集接口

数据 | 来源
--|--
时间 | 系统内部时钟
房间信息 | 从控机发送房间温度
目标状态 | 从控机发送目标状态（温度、风速）
房客信息 | 用户（酒店前台）录入
配置信息 | 用户（酒店后台）录入

#### 从控机数据采集接口

数据 | 来源
--|--
时间 | 系统内部时钟
房间信息 | 温度传感器
目标状态 | 用户（房客）调节温度、风速
房客信息 | 用户（房客）录入

## 其他需求分析

其他需求分析横向从主控机、从控机两个方面展开，纵向从用户友好性、安全性、健壮性、易用性、可靠性、可维护性、可配置性、可移植性、可重用性、可扩展性等维度进行具体化描述。

### 主控机其他需求

[th=width:100px]

| 需求类型|描述|
|--|--|
| 用户友好性 | 主控机界面简洁美观，实用性强，各个按钮在界面中合理分布，方便管理员管理、监控。主控机应该能够清楚、简洁地显示各个从控机的状态，各机器的能耗统计数据及费用报表。|
| 安全性 | 主控机应提供管理员身份认证、授权控制、以及系统安全性等方面的保证。同时监控分布式温控系统内部的流量情况，发现异常流量情况时及时警报。对系统外部及内部的潜在攻击有一定的防御能力。|
| 健壮性 | 主控机应具有应对可能的并发大规模请求的能力，保证系统不会在大量用户的同时请求下崩溃。|
| 易用性 | 主控机的使用应尽可能地保持简单，并且对主控机的使用应该提供尽可能详细的使用说明及培训资料，保证管理员能够尽可能简单、快捷地使用主控机。|
| 可靠性 | 系统需要 7 X 24 小时连续运行，年计划宕机时间不能高于 8 小时，并且要求能快速部署，特别是在系统出现故障时，能够快速告知管理员，并能够提供应急服务，保证酒店温控系统的正常工作。|
| 可维护性 | 主控机系统应保证良好的可维护性。主控机应保证定时或在事件驱动下输出日志，保证维护人员可以监控和观察系统状态，在故障发生时及时的监测、诊断以及修复温控系统。|
| 可配置性 | 主控机的参数应该是可配置的，以使其可以通过不同的配置文件灵活部署于不同的平台及系统。|
| 可移植性 | 系统应能够在不同平台及操作系统下使用，具有良好的兼容性。在少量修改或者不作修改的基础上就可以方便、快捷地部署在不同的硬件及软件平台上。|
| 可重用性 | 分布式温控系统应该具备良好的可重用性，即在可配置性和可移植性的基础上，能够在不同的酒店及平台上应用，避免重复开发。|
| 可扩展性 | 分布式温控系统应具有对技术和业务需求变化的支持能力。当技术变化或业务变化时，不可避免将带来系统的改变。所以系统不仅可能面临进行设计实现的修改，甚至面临着进行产品定义的修改。因此，系统的设计应在系统架构上考虑能以尽量少的代价适应这种变化。|

### 从控机其他需求

[th=width:100px]

| 需求类型|描述|
|--|--|
| 用户友好性 | 要求从机界面简洁美观，具有很强的实用性，各按钮合理配置区域，方便用户使用。各基本功能应该清楚地显示在界面中，包括开关、温度及风速调节、模式、控制方式等。|
| 安全性 | 从控机应提供住客及客房打扫人员等的身份认证及控制授权，保证从机不会被非法控制。|
| 健壮性 | 从控机在面对住客非正常使用时(如在短时间内多次按下模式切换键)能够正常地响应用户，保证系统不会崩溃。|
| 易用性 | 从控机的界面应该清晰，并对新用户有足够的引导及帮助，保证用户能够正确地使用从控机以发出温控请求。|
| 可靠性 | 从控机应能保证较低的故障率，并且在故障发生时能够及时地告知主控机及工作人员进行故障修复。|
| 可维护性 | 从控机应该能够记录每一条发出的请求及来自主控机的控制命令，允许在管理员的操控下输出运行日志，记录系统运行状态。当发生故障时，保证维护人员可以监控和观察主、从控机状态，在故障发生时准确定位故障原因进行修复。|
| 可配置性 | 从控机的参数应该是可配置的，以使得从控机通过不同的配置文件适应不同客户的需求。从控机系统可以记录不同用户的使用习惯，使得用户再次入住时不需要重复设置。|
| 可移植性 | 从控机软件应该能够方便快捷地部署在不同的平台上。如手机、壁挂面板等，以使得用户可以更方便地操控从控机。|
| 可重用性 | 从控机在可配置性和可移植性的基础上，能够在不同的酒店及平台上应用，避免重复开发。|
| 可扩展性 | 在面对技术及需求不断的更新时，从控机应该能够方便快捷地进行升级扩展。这要求从控机与主控机架构上解耦，从软硬件两方面能够以尽可能小的成本升级修改。|